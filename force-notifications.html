<!DOCTYPE html>
<html>
<head>
    <title>For√ßar Carregamento de Notifica√ß√µes</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <h1>For√ßar Carregamento de Notifica√ß√µes</h1>
    <button onclick="forceLoadNotifications()">For√ßar Carregamento</button>
    <div id="result"></div>

    <script>
        const supabaseUrl = 'https://mywxfyfzonzsnfplyogv.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im15d3hmeWZ6b256c25mcGx5b2d2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY0MDMwODYsImV4cCI6MjA3MTk3OTA4Nn0.8lzqt8bfzlzr8v-w_JTh4EDmVrO66tlRiaQ9LJbfxas';
        
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

        async function forceLoadNotifications() {
            try {
                console.log('üß™ For√ßando carregamento de notifica√ß√µes...');
                
                // Simular usu√°rio ADM
                const userId = 'd3ce31c3-b6d6-4fca-a414-d3a64a6fa73f';
                
                const { data, error } = await supabase
                    .from('notifications')
                    .select('*')
                    .eq('user_id', userId)
                    .order('created_at', { ascending: false })
                    .limit(10);

                if (error) {
                    console.error('‚ùå Erro ao carregar notifica√ß√µes:', error);
                    document.getElementById('result').innerHTML = `
                        <h3>Erro:</h3>
                        <p style="color: red;">${error.message}</p>
                    `;
                    return;
                }

                console.log('üì• Notifica√ß√µes carregadas:', data);
                
                document.getElementById('result').innerHTML = `
                    <h3>Notifica√ß√µes Encontradas: ${data.length}</h3>
                    <div style="margin-top: 20px;">
                        ${data.map(notification => `
                            <div style="border: 1px solid #ccc; padding: 10px; margin: 10px 0; border-radius: 5px;">
                                <h4>${notification.title}</h4>
                                <p>${notification.message}</p>
                                <p><strong>Tipo:</strong> ${notification.type}</p>
                                <p><strong>Data:</strong> ${new Date(notification.created_at).toLocaleString('pt-BR')}</p>
                                <p><strong>Lida:</strong> ${notification.read ? 'Sim' : 'N√£o'}</p>
                                ${notification.pdf_url ? `<p><strong>PDF:</strong> <a href="${notification.pdf_url}" target="_blank">Ver PDF</a></p>` : ''}
                            </div>
                        `).join('')}
                    </div>
                `;

                if (data.length > 0) {
                    console.log('‚úÖ Notifica√ß√µes carregadas com sucesso!');
                } else {
                    console.log('‚ö†Ô∏è Nenhuma notifica√ß√£o encontrada');
                }
            } catch (error) {
                console.error('‚ùå Erro no teste:', error);
                document.getElementById('result').innerHTML = `
                    <h3>Erro no Teste:</h3>
                    <p style="color: red;">${error.message}</p>
                `;
            }
        }
    </script>
</body>
</html>
